- [データ入出力の基礎知識](#データ入出力の基礎知識)
  - [データ入出力とは？](#データ入出力とは)
  - [アクセス方法](#アクセス方法)
    - [ランダムアクセス](#ランダムアクセス)
    - [ストリーム入出力](#ストリーム入出力)
  - [ストリームのオープン・クローズ](#ストリームのオープンクローズ)
  - [Javaにおけるストリーム](#javaにおけるストリーム)
  - [クラス構成](#クラス構成)
    - [入出力の対](#入出力の対)
    - [データ種類](#データ種類)
- [実際のクラス](#実際のクラス)
  - [InputStream](#inputstream)


# データ入出力の基礎知識
## データ入出力とは？
データ入出力を可能とすることは、意義深い。
単なるノコギリでも十分性能を発揮するが、スイッチによって、刃の間隔を変更できたり、動作を変更できればより用途が広がる、
みたいなことだろう。


## アクセス方法
### ランダムアクセス
それらが並んだ順序とは無関係に、意図した位置のデータや領域に直接アクセスし読み書きすること。
本当にランダムにめちゃくちゃにアクセスするわけではない。

例としては、配列である。
配列aの10番目の要素(a[10])へアクセスしたいときは、その要素へ直接アクセスできる。

しかし、ランダムアクセスを行うには、入出力先の外部機器自体がランダムアクセス機能を提供していなくてはならない。
そのような外部機器は少なく、ファイルを記録するディスクドライブくらいしかない。

http://www.ohshiro.tuis.ac.jp/~ohshiro/progaa/21/index.html


### ストリーム入出力
もうひとつの方法は、外部からデータを順々に入力したり、外部へデータを順々に出力していくような方法である。
Javaをはじめ、多くのプログラミング言語では、このような入出力を、ストリーム(stream)という概念で表現している。

入ってきた順番のまま、出力ストリームに送り出すので高い機能を必要としない。


## ストリームのオープン・クローズ
ストリームオブジェクトは、生成時にコンストラクタで指定された入出力の対象をストリームに結びつけ、データ入出力の準備を行う。
この作業を、ストリームのオープン(open)と言う。


## Javaにおけるストリーム
Javaのオブジェクトは参照されなくなった段階で、自動的にメモリ領域が解放されるようになっており（GC）、
そのときにストリームオブジェクトはストリームのクローズを自動的に行う。

しかし、入出力の必要が無くなったストリームは、close()メソッドを利用して、できるだけ早い段階で明示的にクローズするべきである。
たとえば、オペレーティングシステムによっては、同時に開くことのできるファイルの上限数が制限されている場合があり、ストリームのクローズが遅れれば、他のプログラムでファイルが開けなくなったりすることが起こりえるからである。


## クラス構成
### 入出力の対
必ず、入力ストリームのクラスと出力ストリームのクラスが対になる。

### 読み込むデータ種類
ストリームに入出力するデータは2種類ある。
1. 文字データ：テキストを構成するデータ。
2. バイナリデータ(バイトデータ)：画像や数値データのようなバイト単位のデータ。

すべてバイトデータで扱えればよいが、「文字」というものは、文字コードによって同じ文字が1バイトで表現されていたり、2バイトで表現されていたりするので、単純にバイト単位で入出力をするわけにはいかないのである。

    ちなみに、pythonでは扱う入出力は3種類ある。
      1. 文字データ：テキストを構成するデータ。
      2. バイナリデータ(バイトデータ)：buffered I/O。画像や数値データのようなバイト単位のデータ。
      3. rawデータ：unbuffered I/O（python）。OS に近い部分とやり取りする生の入出力。

# 実際のクラス（バイトデータを扱うクラス）
## InputStream
InputStreamは、バイトデータ用の入力ストリームが備えるべき基本的なメソッドを定義している抽象クラスである。

## FilterInputStream
InputStreamの”ラッパー”クラスである。

### DataInputStream
主にプリミティブ型(基本型)を中心としたデータ値をストリームから
読み込む機能を、元のストリームに付加するラッパクラスである。

### BufferedInputStream
BufferedInputStream は、元の入力ストリームにバッファ機能を付加するラッパクラスである。
ディスク装置などの入出力機器のデータアクセス速度は、メモリ上のデータへのアクセス速度にくらべ、圧倒的に遅い。
そのため、少量のデータを頻繁に読み込むなどすると、非常に時間がかかってしまう(下図(1))。

そこで、バッファ(buffer)と呼ばれるメモリ上の領域に、まとまった量のデータをあらかじめ一気に読み込んでおき、実際に読み込むときには、そのバッファからデータを入力するようにすれば、入力処理を高速化することができる（上図(2)）。
バッファはデータのアクセスを高速化させるために、よく用いられる。

BufferedInputStream オブジェクトは、バッファ領域を確保して、バッファ機能を提供してくれるのである。積極的に使うべきラッパストリームと言える。コンストラクタをTable 2-(5)に示す。


## OutputStream
### DataOutputStream
プリミティブ型を書き込むためのメソッドを提供するクラス。

### BufferedOutputStream
バッファ機能を提供。高速化させる。積極的に使うべき。

### PrintStream
プリミティブ型や文字列の値を，文字表現としての値を持つバイトデータとして出力する機能を付加するラッパークラス。
PrintStream型ストリームで馴染みが深いのは，「System.out」であろう。
これは，Systemクラスのstaticフィールドで，標準出力(standard output)と呼ばれるオープンずみの特別な出力ストリームオブジェクトである。


# 実際のクラス（文字データを扱うクラス）
## Reader
すべての文字データ入力ストリームのスーパークラスとして，抽象クラス Reader が用意されて
いる。このため，文字データ入力ストリームのことを，単に“リーダ”と呼ぶこともある。

### StringReader
文字列を入力元とする文字データ入力ストリーム。

### CharArrayReader
char型配列を入力元とする文字データ入力ストリーム。

### FileReader
ファイルを入力元とするリーダである。InputStreamReader (Table 2-(4)) のサブクラなので，そのメソッドを継承している。
ファイルは，このような文字エンコーディングの違いが問題になりやすいので，FileReaderはInputStreamReader のサブクラスになっている(Fig.1)。

### PipedReader
PipedReaderは，スレッド間のデータのやりとりに使われるリーダである。

## 文字入力用のラッパストリーム（InputStream のラッパストリーム）
### InputStreamReader
文字データを読むなら，Readerをラップするのが当然ではと思うかもだが理由がある。
Javaのプログラム内では，文字データは1文字2バイトの Unicode という文字コードで表現されている。
しかし，様々なコンピュータでは，文字データをいろいろな文字エンコーディングで扱っている。
そのため，ストリームの入力元(たとえばファイル)か やってくる文字データは，かならずしも Unicode で表現されているとは限らないのである。
　この問題を解決するために用意されているのが，この InputStreamReader なのである。
ストリームの入力元が Unicode 以外の文字エンコーディングを採用している場合，ストリームからやってくるデータは，もはや文字データとは言えず，バイトデータとかわりないことになる(そのままでは文字として解釈できないのだから!)。
そのため，バイトデータを入力する InputStream でバイト単位でデータを読む必要があるのである。そして，InputStreamReader は，InputStream をラップして，その出力を Unicode 文字に変換してくれるのである(Fig.3)。

###
## 文字入力用のラッパストリーム（Reader のラッパストリーム）

